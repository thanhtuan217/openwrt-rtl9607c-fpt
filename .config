# -----------------------------------------------------------------------------
# Cấu hình OpenWrt cho FPT G-97RG6W (RTL9607C) - Tối ưu WISP/Repeater
# Dựa trên cấu hình gốc của bạn + Bổ sung và Tối ưu hóa
# -----------------------------------------------------------------------------

# --- Cấu hình Target System và Chip ---
CONFIG_TARGET_realtek=y
# Chắc chắn rằng chỉ có một dòng CONFIG_TARGET_realtek_rtlxxxx được chọn.
# Tôi chọn lại rtl9607c subtarget theo repo của bạn, thay vì rtl83xx chung chung.
CONFIG_TARGET_realtek_rtl9607c=y
CONFIG_TARGET_BOARD="rtl9607c"
CONFIG_TARGET_SUBTARGET="rtl9607c"
CONFIG_TARGET_REALTEK_RTL9607C_Default=y
# CONFIG_TARGET_realtek_rtl83xx_DEVICE_G97RG6W=y  # Dòng này có thể bị loại bỏ nếu đã chọn subtarget rtl9607c

# --- Core System và Kernel Modules ---
CONFIG_TARGET_IMAGES_GZIP=y
CONFIG_DEVEL=y
CONFIG_DEBUG=y
CONFIG_TARGET_ROOTFS_SQUASHFS=y
CONFIG_KERNEL_SQUASHFS=y

# Thư viện hệ thống
CONFIG_PACKAGE_libubox=y
CONFIG_PACKAGE_libblobmsg-json=y
CONFIG_PACKAGE_libjson-c=y
CONFIG_PACKAGE_libjson-script=y

# Hỗ trợ USB (giữ nguyên theo yêu cầu của bạn)
CONFIG_PACKAGE_kmod-usb-core=y
CONFIG_PACKAGE_kmod-usb-ohci=y
CONFIG_PACKAGE_kmod-usb-uhci=y
CONFIG_PACKAGE_kmod-usb2=y
CONFIG_PACKAGE_kmod-usb3=y
CONFIG_PACKAGE_kmod-ledtrig-usbdev=y
CONFIG_PACKAGE_kmod-usb-net=y
CONFIG_PACKAGE_kmod-usb-net-cdc-ether=y
CONFIG_PACKAGE_kmod-usb-net-rndis=y

# Hỗ trợ VPN/Tunnel
CONFIG_PACKAGE_kmod-tun=y

# --- Network - Cốt lõi cho WISP ---
CONFIG_IPV6=y
CONFIG_PACKAGE_ip6tables=y
CONFIG_PACKAGE_bridge-utils=y
CONFIG_PACKAGE_kmod-bridge=y
CONFIG_PACKAGE_netifd=y

# --- Driver Wi-Fi và WISP/Repeater BẮT BUỘC ---
# 1. Driver Realtek (đã được repo thanhtuan217 xử lý)
CONFIG_PACKAGE_kmod-mac80211=y
CONFIG_PACKAGE_kmod-cfg80211=y
CONFIG_PACKAGE_kmod-rtlwifi=y  # Driver lõi Realtek
CONFIG_PACKAGE_kmod-rtw88=y    # Driver 5GHz RTL8822B
CONFIG_PACKAGE_rtw88-firmware=y

# 2. Wpad đầy đủ (Hỗ trợ chế độ Client STA cho WISP)
CONFIG_PACKAGE_wpad=y
CONFIG_PACKAGE_wpad-basic=n
CONFIG_PACKAGE_wpad-openssl=y  # Hoặc CONFIG_PACKAGE_wpad-wolfssl=y
CONFIG_PACKAGE_hostapd=y
CONFIG_PACKAGE_hostapd-common=y

# 3. Gói Relay/Bridge (Lõi WISP)
CONFIG_PACKAGE_relayd=y  # BẮT BUỘC cho chức năng Repeater/WISP

# --- Tối ưu hóa Hiệu năng ---
CONFIG_PACKAGE_irqbalance=y            # Cân bằng ngắt CPU
CONFIG_PACKAGE_kmod-nft-offload=y      # BẬT Flow Offloading (giảm tải CPU)
CONFIG_PACKAGE_kmod-ipt-offload=y
CONFIG_PACKAGE_kmod-sched-cake=y       # Gói lõi cho SQM

# --- Giao diện Web (LuCI) ---
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-ssl=y
CONFIG_PACKAGE_luci-theme-bootstrap=y

# Ứng dụng LuCI cho WISP và các ứng dụng nâng cao
CONFIG_PACKAGE_luci-proto-relay=y          # Hỗ trợ cấu hình relayd/WISP qua LuCI
CONFIG_PACKAGE_luci-app-firewall=y
CONFIG_PACKAGE_luci-app-opkg=y
CONFIG_PACKAGE_luci-app-statistics=y
CONFIG_PACKAGE_luci-app-sqm=y              # Quản lý chất lượng dịch vụ (QoS)
CONFIG_PACKAGE_luci-app-adblock=y
CONFIG_PACKAGE_luci-app-upnp=y
CONFIG_PACKAGE_luci-app-wol=y
CONFIG_PACKAGE_luci-app-vnstat=y
CONFIG_PACKAGE_luci-app-ttyd=y
CONFIG_PACKAGE_luci-app-commands=y

# --- Công cụ và Tiện ích ---
CONFIG_PACKAGE_bash=y
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_wget=y
CONFIG_PACKAGE_tcpdump=y
CONFIG_PACKAGE_openssh-server=y
CONFIG_PACKAGE_kmod-gpio-button-hotplug=y
CONFIG_PACKAGE_htop=y                      # Công cụ giám sát hệ thống

# --- Tùy chỉnh thông tin Firmware (Cá nhân hóa) ---
# Tôi giữ nguyên định dạng của bạn. Bạn hãy đảm bảo đã điền thông tin đúng.
CONFIG_CUSTOM_PROFILE_NAME="Thanh Tuan OpenWrt"
CONFIG_CUSTOM_PROFILE_PHONE="0979 961556"
CONFIG_CUSTOM_PROFILE_EMAIL="thanhtuan217@gmail.com"
CONFIG_CUSTOM_PROFILE_WEBSITE="https://github.com/thanhtuan217"
